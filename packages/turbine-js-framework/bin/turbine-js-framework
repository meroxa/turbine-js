#! /usr/bin/env node
const FUNCTION_ADDRESS = process.env.MEROXA_FUNCTION_ADDR;

const args = process.argv.slice(2);

const { FunctionServer } = require("../lib/function");

function executeCommand() {
  if (args[0] === "function") {
    const functionName = args[1];
    const pathToDataApp = args[2] || process.cwd();

    const functionServer = new FunctionServer(
      functionName,
      FUNCTION_ADDRESS,
      pathToDataApp
    );

    functionServer.start();
  } else {
    throw new Error("Invalid framework command");
  }
}

executeCommand();
